---
import type { Patent } from "../../types/research-page.data";

interface Props {
  patent: Patent;
}

const { patent } = Astro.props;

const filingDate = new Date(patent.filingDate).toLocaleDateString("en-US", {
  year: "numeric",
  month: "short",
});

const grantDate = patent.grantDate
  ? new Date(patent.grantDate).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
    })
  : null;
---

<div
  class="bg-gray-900 border border-gray-800 rounded-lg p-6 hover:border-purple-500 transition-colors duration-300"
>
  <div class="flex items-start justify-between mb-3">
    <div
      class={`inline-block px-3 py-1 border rounded-full text-xs font-medium ${patent.status === "granted" ? "bg-green-600/20 text-green-400 border-green-500/30" : "bg-yellow-600/20 text-yellow-400 border-yellow-500/30"}`}
    >
      {patent.status === "granted" ? "âœ“ Granted" : "â³ Pending"}
    </div>
    <div class="text-xs text-gray-500 font-mono">{patent.patentNumber}</div>
  </div>

  <h3 class="text-lg font-semibold mb-2 text-white leading-tight">
    {patent.title}
  </h3>

  <p class="text-sm text-gray-400 mb-3">
    {patent.inventors.join(", ")}
  </p>

  <div class="text-xs text-gray-500 mb-3 space-y-1">
    <div>Filed: {filingDate}</div>
    {grantDate && <div>Granted: {grantDate}</div>}
  </div>

  <p class="text-sm text-gray-400 leading-relaxed mb-4">
    {patent.abstract}
  </p>

  {
    patent.tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mb-4">
        {patent.tags.map((tag) => (
          <span class="px-2.5 py-1 bg-gray-800 border border-gray-700 rounded-full text-xs text-gray-300">
            {tag}
          </span>
        ))}
      </div>
    )
  }

  {
    patent.patentUrl && (
      <a
        href={patent.patentUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="text-sm text-gray-400 hover:text-white transition-colors"
      >
        ğŸ”— View Patent
      </a>
    )
  }
</div>
