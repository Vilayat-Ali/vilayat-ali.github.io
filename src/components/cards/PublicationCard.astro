---
import type { Publication } from "../../types/research-page.data";

interface Props {
  publication: Publication;
}

const { publication } = Astro.props;

const typeColors = {
  conference: "bg-blue-600/20 text-blue-400 border-blue-500/30",
  journal: "bg-purple-600/20 text-purple-400 border-purple-500/30",
  workshop: "bg-green-600/20 text-green-400 border-green-500/30",
  preprint: "bg-yellow-600/20 text-yellow-400 border-yellow-500/30",
};
---

<div
  class="bg-gray-900 border border-gray-800 rounded-lg p-6 hover:border-blue-500 transition-colors duration-300"
>
  {
    publication.featured && (
      <div class="inline-block px-3 py-1 bg-blue-600 text-white text-xs font-semibold rounded-full mb-3">
        Featured
      </div>
    )
  }

  <div class="flex items-start gap-3 mb-3">
    <div
      class={`inline-block px-3 py-1 border rounded-full text-xs font-medium ${typeColors[publication.type]}`}
    >
      {publication.type.charAt(0).toUpperCase() + publication.type.slice(1)}
    </div>
    <div class="text-sm text-gray-500">{publication.year}</div>
  </div>

  <h3 class="text-lg font-semibold mb-2 text-white leading-tight">
    {publication.title}
  </h3>

  <p class="text-sm text-gray-400 mb-2">
    {publication.authors.join(", ")}
  </p>

  <p class="text-sm text-blue-400 mb-3 font-medium">
    {publication.venue}
  </p>

  <p class="text-sm text-gray-400 leading-relaxed mb-4">
    {publication.abstract}
  </p>

  {
    publication.tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mb-4">
        {publication.tags.map((tag) => (
          <span class="px-2.5 py-1 bg-gray-800 border border-gray-700 rounded-full text-xs text-gray-300">
            {tag}
          </span>
        ))}
      </div>
    )
  }

  <div class="flex flex-wrap gap-3">
    {
      publication.pdfUrl && (
        <a
          href={publication.pdfUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-gray-400 hover:text-white transition-colors"
        >
          üìÑ PDF
        </a>
      )
    }
    {
      publication.arxivUrl && (
        <a
          href={publication.arxivUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-gray-400 hover:text-white transition-colors"
        >
          üìù arXiv
        </a>
      )
    }
    {
      publication.doiUrl && (
        <a
          href={publication.doiUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-gray-400 hover:text-white transition-colors"
        >
          üîó DOI
        </a>
      )
    }
    {
      publication.codeUrl && (
        <a
          href={publication.codeUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-gray-400 hover:text-white transition-colors"
        >
          üíª Code
        </a>
      )
    }
  </div>
</div>
